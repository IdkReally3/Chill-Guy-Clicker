<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Click Da Chill Guy</title>
  <link rel="stylesheet" href="style.css">
  <style>
    :root {
      --bg-light: #e8ff8b;
      --bg-dark: #232323;
      --button-light: #ddd728;
      --button-dark: #444444;
      --button-hover-light: #c6c01a;
      --button-hover-dark: #666666;
      --text-light: #222;
      --text-dark: #eee;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: var(--bg-light);
      color: var(--text-light);
      transition: background 0.3s, color 0.3s;
      overflow-x: hidden;
    }
    #clickerContainer, #shopContainer {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 20px 0;
    }
    #ChillGuy {
      display: block;
      margin: 20px auto;
      cursor: pointer;
      width: 200px;
      height: auto;
      transition: transform 0.15s cubic-bezier(.68,-0.55,.27,1.55), box-shadow 0.15s;
      z-index: 1;
      position: relative;
    }
    #ChillGuy:hover {
      transform: scale(1.18);
      box-shadow: 0 8px 32px 0 var(--bg-light);
      z-index: 2;
    }
    #ChillGuy.bounce {
      animation: bounce 0.35s cubic-bezier(.68,-0.55,.27,1.55);
    }
    @keyframes bounce {
      0%   { transform: scale(1.18) translateY(0); }
      30%  { transform: scale(1.25,0.9) translateY(-18px);}
      50%  { transform: scale(0.95,1.1) translateY(6px);}
      70%  { transform: scale(1.08,0.97) translateY(-8px);}
      100% { transform: scale(1.18) translateY(0);}
    }
    .chillguy-ghost {
      position: fixed;
      width: 80px;
      height: auto;
      pointer-events: none;
      opacity: 0.5;
      z-index: 0;
      animation: phase-through 1.2s linear forwards;
    }
    @keyframes phase-through {
      0% {
        opacity: 0.5;
        transform: translateY(0) scale(1) rotate(0deg);
        filter: blur(0px);
      }
      60% {
        opacity: 0.3;
        filter: blur(2px);
      }
      100% {
        opacity: 0;
        transform: translateY(100vh) scale(1.2) rotate(20deg);
        filter: blur(6px);
      }
    }
    button {
      width: 260px;
      padding: 16px 0;
      margin: 10px 0;
      font-size: 1.2em;
      border-radius: 8px;
      border: none;
      background: var(--button-light);
      color: white;
      transition: background 0.2s;
    }
    button:hover {
      background: var(--button-hover-light);
    }
    h1, h2, p {
      text-align: center;
    }
    /* Hide audio controls */
    audio {
      display: none;
    }
    /* Toggle button styling */
    #toggleModeBtn {
      position: fixed;
      top: 18px;
      right: 18px;
      z-index: 10;
      background: var(--button-light);
      color: var(--text-light);
      border: none;
      border-radius: 50px;
      padding: 8px 16px;
      font-size: 0.95em;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: background 0.2s, color 0.2s;
    }
    #toggleModeBtn:hover {
      background: var(--button-hover-light);
    }
    /* Music toggle styling - now smaller and in line with toggleModeBtn */
    #musicToggleContainer {
      position: fixed;
      top: 18px;
      left: 18px;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 4px;
      background: var(--button-light);
      color: var(--text-light);
      border-radius: 50px;
      padding: 8px 22px; /* Increased horizontal padding */
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: background 0.2s, color 0.2s;
      font-size: 0.92em;
      min-width: 320px; /* Ensure enough width for text */
      width: auto;
      height: 36px; /* Slightly taller */
    }
    #musicToggleContainer select, #musicToggleContainer button {
      font-size: 0.92em;
      border-radius: 8px;
      border: none;
      padding: 2px 6px;
      margin: 0 1px;
      background: var(--button-light);
      color: var(--text-light);
      transition: background 0.2s, color 0.2s;
      height: 24px;
    }
    #musicToggleContainer button {
      font-weight: bold;
      cursor: pointer;
      width: 28px;
      min-width: 28px;
      padding: 0;
      text-align: center;
    }
    #musicToggleContainer button:hover, #musicToggleContainer select:focus {
      background: var(--button-hover-light);
    }
    #currentSong {
      font-size: 0.95em;
      margin-left: 8px;
      font-style: italic;
      color: var(--text-light);
      white-space: nowrap;
      max-width: 180px; /* Allow more room for song name */
      overflow: hidden;
      text-overflow: ellipsis;
      display: inline-block;
      vertical-align: middle;
    }
    body.dark-mode #musicToggleContainer,
    body.dark-mode #musicToggleContainer select,
    body.dark-mode #musicToggleContainer button {
      background: var(--button-dark);
      color: var(--text-dark);
    }
    body.dark-mode #musicToggleContainer button:hover,
    body.dark-mode #musicToggleContainer select:focus {
      background: var(--button-hover-dark);
    }
    body.dark-mode #currentSong {
      color: var(--text-dark);
    }
    body.dark-mode {
      background: var(--bg-dark);
      color: var(--text-dark);
    }
    body.dark-mode button, body.dark-mode #toggleModeBtn {
      background: var(--button-dark);
      color: var(--text-dark);
    }
    body.dark-mode button:hover, body.dark-mode #toggleModeBtn:hover {
      background: var(--button-hover-dark);
    }
    body.dark-mode #ChillGuy:hover {
      box-shadow: 0 8px 32px 0 var(--bg-dark);
    }
  </style>
</head>
<body>
  <button id="toggleModeBtn" onclick="toggleMode()">üåô Dark Mode</button>
  <div id="musicToggleContainer">
    <label for="musicSelect" style="font-weight:bold;">üéµ</label>
    <select id="musicSelect">
      <option value="0">Fluffing a Duck</option>
      <option value="1">Pixel Peeker Polka</option>
      <option value="2">Move Forward</option>
    </select>
    <button id="musicPlayPauseBtn">‚è∏Ô∏è</button>
    <span id="currentSong">Now Playing: Fluffing a Duck</span>
  </div>
  <div id="clickerContainer" style="position:relative;">
    <h1>Click Dis Chill Guy!!</h1>
    <p>Chill Points: <span id="money">0</span></p>
    <img src="Sprites/ChillGuy.png" alt="ChillGuy" id="ChillGuy" onclick="clickChillGuy()">
  </div>
  
  <div id="shopContainer">
    <h2>Shop</h2>
    <p>Chill Lemonades: <span id="mpc">1</span></p>
    <p>(Chill Lemonades add one more chill point per click)</p>
    <button onclick="upgradeMPC()">Buy A Chill Lemonade (Cost: <span id="mpcCost">10</span> Chill Points)</button>
    <!-- Swapped: Cool Glasses before Super Lemonades -->
    <p>Cool Glasses: <span id="mps">0</span></p>
    <p>(Cool Glasses give you one more Chill Point Per Second)</p>
    <button onclick="buyMPS()">Buy Cool Glasses (Cost: <span id="mpsCost">50</span> Chill Points)</button>
    <p>Super Lemonades: <span id="mpc5">0</span></p>
    <p>(Super Lemonades add 5 more chill points per click)</p>
    <button onclick="upgradeMPC5()">Buy A Super Lemonade (Cost: <span id="mpc5Cost">80</span> Chill Points)</button>
    <p>Payed Vacations: <span id="vacations">0</span></p>
    <p>(Payed Vacations give you 5 more Chill Points Per Second)</p>
    <button onclick="buyVacation()">Buy Payed Vacation (Cost: <span id="vacationCost">150</span> Chill Points)</button>
    <!-- ChillMaxing upgrade -->
    <p>Super Chills: <span id="chillmaxing">0</span></p>
    <p>(Super Chills gives you 10 more chill points per click)</p>
    <button onclick="buyChillMaxing()">Buy Super Chill (Cost: <span id="chillmaxingCost">1000</span> Chill Points)</button>
    <!-- New Upgrades -->
    <p>Sweet Pie: <span id="sweetPie">0</span></p>
    <p>(Sweet Pies gives you 20 more chill points per click)</p>
    <button onclick="buySweetPie()">Buy Sweet Pie (Cost: <span id="sweetPieCost">2500</span> Chill Points)</button>
    <p>Old Radios: <span id="oldRadio">0</span></p>
    <p>(Old Radio gives you 15 more chill points per second)</p>
    <button onclick="buyOldRadio()">Buy Old Radio (Cost: <span id="oldRadioCost">6000</span> Chill Points)</button>
    <p>Tropical Smoothies: <span id="tropicalSmoothie">0</span></p>
    <p>(Tropical Smoothie gives you 50 more chill points per click)</p>
    <button onclick="buyTropicalSmoothie()">Buy Tropical Smoothie (Cost: <span id="tropicalSmoothieCost">12000</span> Chill Points)</button>
    <p>Chill Coconuts: <span id="chillCoconut">0</span></p>
    <p>(Chill Coconut gives you 75 more chill points per click)</p>
    <button onclick="buyChillCoconut()">Buy Chill Coconut (Cost: <span id="chillCoconutCost">25000</span> Chill Points)</button>
  </div>
  <!-- Achievements Section -->
  <div id="achievementsContainer" style="margin-top:32px; text-align:center;">
    <h2>AchievementsüèÖ</h2>
    <ul id="achievementsList" style="list-style:none; padding:0; max-width:350px; margin:0 auto;">
      <!-- Achievements will be populated here -->
    </ul>
  </div>

  <!-- Hidden audio elements for background music -->
  <audio id="audio1" src="Audio/Fluffing a Duck [TubeRipper.com].mp3"></audio>
  <audio id="audio2" src="Audio/Kevin MacLeod Pixel Peeker Polka - faster [TubeRipper.com].mp3"></audio>
  <audio id="audio3" src="Audio/Move Forward [TubeRipper.com].mp3"></audio>

  <script>
    let money = 0;
    let mpc = 1; // Money per click (from Lemonades)
    let mpcCost = 20;
    let mpc5 = 0; // Number of Super Lemonades
    let mpc5Cost = 300;
    let mps = 0; // Money per second (from Cool Glasses)
    let mpsCost = 100;
    let vacations = 0; // Number of Payed Vacations
    let vacationCost = 600;
    let chillmaxing = 0; // Number of ChillMaxing upgrades
    let chillmaxingCost = 1000;
    // New upgrades
    let sweetPie = 0;
    let sweetPieCost = 2500;
    let oldRadio = 0;
    let oldRadioCost = 6000;
    let tropicalSmoothie = 0;
    let tropicalSmoothieCost = 12000;
    let chillCoconut = 0;
    let chillCoconutCost = 25000;
    let mpsInterval = null;
    let darkMode = false;

    // --- Music toggle logic ---
    const audioFiles = [
      document.getElementById('audio1'),
      document.getElementById('audio2'),
      document.getElementById('audio3')
    ];
    const songNames = [
      "Fluffing a Duck",
      "Pixel Peeker Polka",
      "Move Forward"
    ];
    let currentAudio = 0;
    let isPlaying = true;

    const musicSelect = document.getElementById('musicSelect');
    const musicPlayPauseBtn = document.getElementById('musicPlayPauseBtn');
    const currentSongSpan = document.getElementById('currentSong');

    function playAudio(idx) {
      // Pause all
      audioFiles.forEach(a => { a.pause(); a.currentTime = 0; });
      currentAudio = idx;
      audioFiles[currentAudio].play();
      isPlaying = true;
      musicPlayPauseBtn.textContent = "‚è∏Ô∏è";
      currentSongSpan.textContent = "Now Playing: " + songNames[currentAudio];
      musicSelect.value = String(currentAudio);
    }

    function pauseAudio() {
      audioFiles[currentAudio].pause();
      isPlaying = false;
      musicPlayPauseBtn.textContent = "‚ñ∂Ô∏è";
    }

    function resumeAudio() {
      audioFiles[currentAudio].play();
      isPlaying = true;
      musicPlayPauseBtn.textContent = "‚è∏Ô∏è";
    }

    // Play next song automatically
    audioFiles.forEach((audio, idx) => {
      audio.addEventListener('ended', function() {
        let next = (currentAudio + 1) % audioFiles.length;
        playAudio(next);
      });
    });

    // Dropdown change
    musicSelect.addEventListener('change', function() {
      playAudio(Number(this.value));
    });

    // Play/Pause button
    musicPlayPauseBtn.addEventListener('click', function() {
      if (isPlaying) {
        pauseAudio();
      } else {
        resumeAudio();
      }
    });

    // Start music after user interaction (required by browsers)
    function startMusicOnce() {
      playAudio(currentAudio);
      document.removeEventListener('click', startMusicOnce);
      document.removeEventListener('keydown', startMusicOnce);
    }
    document.addEventListener('click', startMusicOnce);
    document.addEventListener('keydown', startMusicOnce);

    // --- Game logic ---
    // Achievements data
    const achievements = [
      { id: "firstClick", name: "First Click!", desc: "Click the Chill Guy once.", unlocked: false, check: () => totalClicks >= 1 },
      { id: "lemonadeBuyer", name: "Lemonade Stand", desc: "Buy your first Chill Lemonade.", unlocked: false, check: () => mpc > 1 },
      { id: "superChill", name: "Super Chill", desc: "Buy your first Super Chill.", unlocked: false, check: () => chillmaxing > 0 },
      { id: "sweetPie", name: "Sweet Tooth", desc: "Buy your first Sweet Pie.", unlocked: false, check: () => sweetPie > 0 },
      { id: "radioStar", name: "Radio Star", desc: "Buy your first Old Radio.", unlocked: false, check: () => oldRadio > 0 },
      { id: "smoothie", name: "Smooth Operator", desc: "Buy your first Tropical Smoothie.", unlocked: false, check: () => tropicalSmoothie > 0 },
      { id: "coconut", name: "Coconut King", desc: "Buy your first Chill Coconut.", unlocked: false, check: () => chillCoconut > 0 },
      { id: "millionaire", name: "Chill Millionaire", desc: "Reach 1,000,000 Chill Points.", unlocked: false, check: () => money >= 1000000 },
      { id: "autoChill", name: "Auto Chill", desc: "Earn at least 100 Chill Points per second.", unlocked: false, check: () => (mps + vacations * 5 + oldRadio * 15) >= 100 },
      { id: "clickMaster", name: "Click Master", desc: "Earn at least 500 Chill Points per click.", unlocked: false, check: () => (mpc + mpc5 * 5 + chillmaxing * 10 + sweetPie * 20 + tropicalSmoothie * 50 + chillCoconut * 75) >= 500 }
    ];
    let totalClicks = 0;

    function updateUI() {
      document.getElementById('money').textContent = money;
      document.getElementById('mpc').textContent = mpc;
      document.getElementById('mpcCost').textContent = mpcCost;
      document.getElementById('mpc5').textContent = mpc5;
      document.getElementById('mpc5Cost').textContent = mpc5Cost;
      document.getElementById('mps').textContent = mps + vacations * 5 + oldRadio * 15;
      document.getElementById('mpsCost').textContent = mpsCost;
      document.getElementById('vacations').textContent = vacations;
      document.getElementById('vacationCost').textContent = vacationCost;
      document.getElementById('chillmaxing').textContent = chillmaxing;
      document.getElementById('chillmaxingCost').textContent = chillmaxingCost;
      document.getElementById('sweetPie').textContent = sweetPie;
      document.getElementById('sweetPieCost').textContent = sweetPieCost;
      document.getElementById('oldRadio').textContent = oldRadio;
      document.getElementById('oldRadioCost').textContent = oldRadioCost;
      document.getElementById('tropicalSmoothie').textContent = tropicalSmoothie;
      document.getElementById('tropicalSmoothieCost').textContent = tropicalSmoothieCost;
      document.getElementById('chillCoconut').textContent = chillCoconut;
      document.getElementById('chillCoconutCost').textContent = chillCoconutCost;
      updateAchievementsUI();
    }

    function clickChillGuy() {
      money += mpc
        + mpc5 * 5
        + chillmaxing * 10
        + sweetPie * 20
        + tropicalSmoothie * 50
        + chillCoconut * 75;
      totalClicks += 1;
      updateUI();
      // Bounce effect
      const chillGuy = document.getElementById('ChillGuy');
      chillGuy.classList.remove('bounce'); // reset if already bouncing
      void chillGuy.offsetWidth; // force reflow
      chillGuy.classList.add('bounce');
      // Phase-through effect
      createGhost();
    }

    function createGhost() {
      // Get viewport width for random X position
      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      // Random X between 0 and (vw - ghost width)
      const ghostWidth = 80;
      const minX = 0;
      const maxX = vw - ghostWidth;
      const randomX = Math.random() * (maxX - minX) + minX;

      const ghost = document.createElement('img');
      ghost.src = "Sprites/ChillGuy.png";
      ghost.className = 'chillguy-ghost';
      ghost.alt = 'ChillGuy Ghost';
      ghost.style.left = randomX + "px";
      ghost.style.top = "0px";
      // Place ghost in body so it can animate over everything
      document.body.appendChild(ghost);
      // Remove ghost after animation
      ghost.addEventListener('animationend', () => {
        ghost.remove();
      });
    }

    function upgradeMPC() {
      if (money >= mpcCost) {
        money -= mpcCost;
        mpc += 1;
        mpcCost = Math.floor(mpcCost * 1.5);
        updateUI();
      }
    }

    function upgradeMPC5() {
      if (money >= mpc5Cost) {
        money -= mpc5Cost;
        mpc5 += 1;
        mpc5Cost = Math.floor(mpc5Cost * 1.7);
        updateUI();
      }
    }

    function buyMPS() {
      if (money >= mpsCost) {
        money -= mpsCost;
        mps += 1;
        mpsCost = Math.floor(mpsCost * 1.7);
        updateUI();
        startMPSInterval();
      }
    }

    function buyVacation() {
      if (money >= vacationCost) {
        money -= vacationCost;
        vacations += 1;
        vacationCost = Math.floor(vacationCost * 1.8);
        updateUI();
        startMPSInterval();
      }
    }

    function buyChillMaxing() {
      if (money >= chillmaxingCost) {
        money -= chillmaxingCost;
        chillmaxing += 1;
        chillmaxingCost = Math.floor(chillmaxingCost * 1.8);
        updateUI();
      }
    }
    function buySweetPie() {
      if (money >= sweetPieCost) {
        money -= sweetPieCost;
        sweetPie += 1;
        sweetPieCost = Math.floor(sweetPieCost * 1.8);
        updateUI();
      }
    }
    function buyOldRadio() {
      if (money >= oldRadioCost) {
        money -= oldRadioCost;
        oldRadio += 1;
        oldRadioCost = Math.floor(oldRadioCost * 1.8);
        updateUI();
        startMPSInterval();
      }
    }
    function buyTropicalSmoothie() {
      if (money >= tropicalSmoothieCost) {
        money -= tropicalSmoothieCost;
        tropicalSmoothie += 1;
        tropicalSmoothieCost = Math.floor(tropicalSmoothieCost * 1.8);
        updateUI();
      }
    }
    function buyChillCoconut() {
      if (money >= chillCoconutCost) {
        money -= chillCoconutCost;
        chillCoconut += 1;
        chillCoconutCost = Math.floor(chillCoconutCost * 1.8);
        updateUI();
      }
    }
    function startMPSInterval() {
      if (!mpsInterval) {
        mpsInterval = setInterval(() => {
          money += mps + vacations * 1 + oldRadio * 15;
          updateUI();
        }, 200);
      }
    }

    // --- Space bar click: only on keydown, not when held ---
    let spacePressed = false;
    document.addEventListener('keydown', function(e) {
      if ((e.code === 'Space' || e.key === ' ') && !spacePressed) {
        spacePressed = true;
        clickChillGuy();
        e.preventDefault();
      }
    });
    document.addEventListener('keyup', function(e) {
      if (e.code === 'Space' || e.key === ' ') {
        spacePressed = false;
      }
    });

    // Remove bounce class after animation ends
    document.getElementById('ChillGuy').addEventListener('animationend', function() {
      this.classList.remove('bounce');
    });

    // --- Light/Dark mode toggle ---
    function toggleMode() {
      darkMode = !darkMode;
      document.body.classList.toggle('dark-mode', darkMode);
      const btn = document.getElementById('toggleModeBtn');
      btn.textContent = darkMode ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
    }

    // Achievements logic
    function updateAchievementsUI() {
      const list = document.getElementById('achievementsList');
      list.innerHTML = '';
      achievements.forEach(a => {
        if (!a.unlocked && a.check()) {
          a.unlocked = true;
        }
        const li = document.createElement('li');
        li.style.margin = "8px 0";
        li.style.padding = "6px 10px";
        li.style.borderRadius = "8px";
        li.style.background = a.unlocked ? "#e8ff8b" : "#eee";
        li.style.color = a.unlocked ? "#222" : "#aaa";
        li.style.opacity = a.unlocked ? "1" : "0.5";
        li.innerHTML = `<strong>${a.name}</strong> - <span style="font-size:0.95em;">${a.desc}</span>` + (a.unlocked ? ' <span style="color:#6c3;">‚úîÔ∏è</span>' : '');
        list.appendChild(li);
      });
    }

    updateUI();
  </script>
</body>
</html>
